<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.srcMapper">

    <!--<insert id="insertSrc">-->
    <!--insert into tbl_src (src_id, src_path, src_comments, src_title, src_writer)-->
    <!--values(#{srcId}, #{srcPath}, #{srcComments}, #{srcTitle}, #{srcWriter})-->
<!--</insert>-->
    <insert id="insertSrc">
        insert into tbl_src (src_id, src_path,
        <if test="srcWriter != 0">src_writer,</if>
        src_comments, src_title, src_status)
        values(#{srcId}, #{srcPath},
        <if test="srcWriter != 0">#{srcWriter},</if>
        #{srcComments}, #{srcTitle}, #{srcStatus})
    </insert>

    <select id="selectSrcOne" resultType="SrcVO">
        select
        src_id srcId,
        src_writer srcWriter,
        src_path srcPath,
        src_comments srcComments,
        src_regdate srcRegdate,
        src_update srcUpdate,
        src_title srcTitle,
        src_likecnt srcLikecnt,
        src_viewcnt srcViewcnt,
        src_status srcStatus
        from tbl_src where src_id = #{srcId}
    </select>

    <update id="updateSrc">
        update tbl_src set
        src_comments = #{srcComments},
        src_title = #{srcTitle},
        src_update = CURRENT_TIMESTAMP,
        src_status = #{srcStatus}
        where src_id = #{srcId}
    </update>

    <update id="updateSrcStatus">
        update tbl_src set src_status = 2 where src_id = #{srcId}
    </update>

    <update id="updateSrcWriter">
        update tbl_src set src_writer = #{srcWriter} where src_id = #{srcId}
    </update>

    <update id="updateSrcLikeCnt">
        update tbl_src set src_likecnt = #{srcLikecnt} where src_id = #{srcId}
    </update>

    <update id="updateSrcViewCnt">
        update tbl_src set src_viewcnt =  src_viewcnt + 1 where src_id = #{srcId}
    </update>
</mapper>